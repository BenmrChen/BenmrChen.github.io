<!DOCTYPE html><html class="appearance-light" lang="en"><head><meta charset="UTF-8"><title>使用 Laradock 跑多個 Laravel 專案</title><meta name="description" content="May the Force be with you"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="前言Laradock 是一個用 Docker 打造完成的 PHP 開發環境 就像是在官網所說的

先會用 Docker，至於 Docker 是什麼就晚點再說吧!

所以就讓我們照以下步驟 迅速使用 Docker 開發 Laravel 吧!
實作步驟環境設置
裝好 Git
裝好 Docker

實際安裝Follow 官網 說明直接操作下去就完成啦! 因為官網說明已經滿完整了 所以以下就是針對我自己遇到的坑做一些小提醒
小提醒由於我們想使用同一個 Docker 來跑多個 Laravel 專案 以下就以 B) Setup for Multiple Projects: 為例

資料夾結構 為了同一個 Docker 跑多個專案 所以資料夾結構會是
* laradock
* project-1
* project-2
.."><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Haojen's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">使用 Laradock 跑多個 Laravel 專案</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%A6%E4%BD%9C%E6%AD%A5%E9%A9%9F"><span class="toc-text">實作步驟</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%92%B0%E5%A2%83%E8%A8%AD%E7%BD%AE"><span class="toc-text">環境設置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%A6%E9%9A%9B%E5%AE%89%E8%A3%9D"><span class="toc-text">實際安裝</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E6%8F%90%E9%86%92"><span class="toc-text">小提醒</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B5%90%E8%AA%9E"><span class="toc-text">結語</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%83%E8%80%83"><span class="toc-text">參考:</span></a></li></ol></div><div class="column is-9"><header class="my-4"></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">使用 Laradock 跑多個 Laravel 專案</h1><time class="has-text-grey" datetime="2020-06-19T02:52:39.000Z">2020-06-19</time><article class="mt-2 post-content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Laradock 是一個用 Docker 打造完成的 PHP 開發環境 就像是在<a target="_blank" rel="noopener" href="https://laradock.io/">官網</a>所說的</p>
<blockquote>
<p>先會用 Docker，至於 Docker 是什麼就晚點再說吧!</p>
</blockquote>
<p>所以就讓我們照以下步驟 迅速使用 Docker 開發 Laravel 吧!</p>
<h2 id="實作步驟"><a href="#實作步驟" class="headerlink" title="實作步驟"></a>實作步驟</h2><h3 id="環境設置"><a href="#環境設置" class="headerlink" title="環境設置"></a>環境設置</h3><ol>
<li>裝好 <a target="_blank" rel="noopener" href="https://git-scm.com/downloads">Git</a></li>
<li>裝好 <a target="_blank" rel="noopener" href="https://docs.docker.com/docker-for-mac/install/">Docker</a></li>
</ol>
<h3 id="實際安裝"><a href="#實際安裝" class="headerlink" title="實際安裝"></a>實際安裝</h3><p>Follow <a target="_blank" rel="noopener" href="https://laradock.io/getting-started/">官網</a> 說明直接操作下去就完成啦! 因為官網說明已經滿完整了 所以以下就是針對我自己遇到的坑做一些小提醒</p>
<h3 id="小提醒"><a href="#小提醒" class="headerlink" title="小提醒"></a>小提醒</h3><p>由於我們想使用同一個 Docker 來跑多個 Laravel 專案 以下就以 <code>B) Setup for Multiple Projects:</code> 為例</p>
<ol>
<li><p>資料夾結構 為了同一個 Docker 跑多個專案 所以資料夾結構會是</p>
<pre><code>* laradock
* project-1
* project-2
</code></pre>
<p>我的實際結構是</p>
<pre><code>~/Sites/laradock
~/Sites/Projects/laravel
~/Sites/Projects/paymechien
</code></pre>
</li>
<li><p>host 設置</p>
<pre><code>127.0.0.1  project-1.test  // 注意這邊有 `.test` 喔
127.0.0.1  project-2.test  // 注意這邊有 `.test` 喔
</code></pre>
</li>
<li><p>Laradock 下的 <code>.env</code> 設置 搭配我的實際結構 所以這邊要寫成 <code>APP_CODE_PATH_HOST=~/Sites/Projects</code></p>
</li>
<li><p>PhpMyAdmin 相關 我的 <code>PhpMyAdmin</code> 不知為何一開始登不進去 後來發現是版本問題 所以要在 <code>.env</code> 把原來的 <code>MYSQL_VERSION=latest</code> 改成 <code>MYSQL_VERSION=5.7</code></p>
<blockquote>
<p>順帶一提，DB的帳密就是上述設定的下面幾行 不要 key 錯囉 (預設帳號、密碼都是 root)</p>
</blockquote>
</li>
</ol>
<ul>
<li><p>在專案底下的 .env 檔 DB_HOST 要改成 <code>DB_HOST=mysql</code> 然後 DB_USERNAME 及 DB_PASSWORD 都要</p>
<pre><code>DB_CONNECTION=mysql
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=payment
DB_USERNAME=root
DB_PASSWORD=root
</code></pre>
</li>
<li><p>進入 PhpMyAdmin 的方法 在 laradock 底下的 .env 裡有定義 PhpMyAdmin 的 port 預設是 8082 所以若要進入 PhpMyAdmin 的話 就是在 domain 後面加上 port 號即可 eg. <a target="_blank" rel="noopener" href="http://abc.test:8082/">http://abc.test:8082</a></p>
</li>
</ul>
<ol start="5">
<li><p>專案一直出現 500 error 問題 注意在官網文件裡有說 要把 root 設對 <img src="https://growingdna.com/wp-content/uploads/2020/06/image-1592534541271.png" alt="file"> 以我的 case 為例，就要設成下面這樣: [專案1] <img src="https://growingdna.com/wp-content/uploads/2020/06/image-1592534554965.png" alt="file"> [專案2] <img src="https://growingdna.com/wp-content/uploads/2020/06/image-1592534563776.png" alt="file"></p>
</li>
<li><p>還是出現 500 error 如果上述還是不行的話 那可能就是因為你是用原來就寫好的專案 (我就是這樣 QQ) 所以沒有把專案的 <code>.env</code> 給commit 上去 以致 laradock 吃不到 然後就 GG了 所以解法就是 在專案資料夾內下 <code>cp .env.example .env</code> 然後生成新的 key <code>php artisan key:generate</code> 這樣就完成啦!</p>
</li>
</ol>
<blockquote>
<p>ps. 如果出現以下error</p>
<pre><code>PHP Warning: require(/home/matynjr/events/vendor/autoload.php): failed to open stream: No such file or directory in /home/matynjr/events/artisan on line 18
PHP Fatal error: require(): Failed opening required &#39;/home/matynjr/events/vendor/autoload.php&#39; (include_path=&#39;.:/usr/share/php&#39;) in /home/matynjr/events/artisan on line 18
</code></pre>
<p>那就是composer太舊，跑一下 <code>composer update</code> 就好了</p>
</blockquote>
<p>最後再 run 一下 <code>docker-compose up -d nginx mysql</code> 看到畫面就ok囉! <img src="https://growingdna.com/wp-content/uploads/2020/06/image-1592534640172.png" alt="file"> <img src="https://growingdna.com/wp-content/uploads/2020/06/image-1592534644249.png" alt="file"></p>
<ol start="7">
<li>無法跑 php artisan migrate 目前發現好像是要進入容器才能運作 (不知道是不是因為有複數專案的關係) 所以要進入容器內下指令 <code>docker-compose exec workspace bash</code> 然後再下 <code>root@xxx6:/var/www# php artisan migrate</code></li>
</ol>
<h2 id="結語"><a href="#結語" class="headerlink" title="結語"></a>結語</h2><p>其實我本來是用 <a target="_blank" rel="noopener" href="https://laravel.com/docs/7.x/valet">Valet</a> 當做本地的開發環境 但由於 Laradock 真的太潮了 又可以確保開發者大家的開發環境一致 自己使用後又發現一些小坑 所以就來分享一下，希望可以幫助到大家!</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考:"></a>參考:</h2><p><a target="_blank" rel="noopener" href="https://medium.com/@yfancc20/laradock-%E8%BC%95%E9%87%8F-laravel-%E7%92%B0%E5%A2%83%E7%9A%84%E5%98%97%E8%A9%A6-%E5%B8%B8%E8%A6%8B%E9%8C%AF%E8%AA%A4-2fc6f0c21433">https:&#x2F;&#x2F;medium.com&#x2F;@yfancc20&#x2F;laradock-%E8%BC%95%E9%87%8F-laravel-%E7%92%B0%E5%A2%83%E7%9A%84%E5%98%97%E8%A9%A6-%E5%B8%B8%E8%A6%8B%E9%8C%AF%E8%AA%A4-2fc6f0c21433</a></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2020/07/09/use-ssh-to-connect-gcp-bitnami-wordpress-phpmyadmin/" title="使用 SSH 遠端連線 GCP Bitnami Wordpress 操作 PhpMyAdmin"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: 使用 SSH 遠端連線 GCP Bitnami Wordpress 操作 PhpMyAdmin</span></a><a class="button is-default" href="/2020/05/21/newebpay-openssl-encrypt-unknown-cipher-algorithm-2/" title="藍新金流 openssl_encrypt(): Unknown cipher algorithm"><span class="has-text-weight-semibold">Next: 藍新金流 openssl_encrypt(): Unknown cipher algorithm</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Haojen/Claudia-theme-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/haojen"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> Haojen 2024</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>